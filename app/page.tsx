"use client";

import React, { useState, useEffect } from "react";

export default function Home() {
  // Start with empty set to avoid hydration mismatch
  const [visibleChars, setVisibleChars] = useState<Set<number>>(new Set());
  const [isClient, setIsClient] = useState(false);

  // Set isClient to true after mount to avoid hydration issues
  useEffect(() => {
    setIsClient(true);
  }, []);

  const asciiArtOriginal = 
`00020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200
406040604060406040604060406040604060406Epistemic Machines0406040604060406040604060Epistemic Machines40604060406040604060406
03010301Epistemic Machines0301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010
705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705
000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000
40604060406040604060Epistemic Machines06040604060406040604060406040604060406040604060406040604Epistemic Machines06040604060
030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030
705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705
000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000
406040604060406040Epistemic Machines040604060406040604060406040604060Epistemic Machines604060406040604060406040705070507976
030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030
70507050705070507050705070507050705070507050705070507050Epistemic Machines7050705070507050705070507050705070507050705070507
00020Epistemic Machines002000200020002000200020Epistemic Machines0020002000200020002000200020002000200020002000200020002000
406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406Epistemic Machines040604
030103010301030103010301030103010301030103010301030103010301030103010301030Epistemic Machines103010301030103010301030103010
70507050Epistemic Machines7050705070507050705071709050705070507070917091707050705070509170917091607050705070509170705070507
00020002000200020002000200025     02000200020           200200020003           20002000200A     000200020002000200020002000
4060406040604060406040604060F     60406040604           E06040604060           04060406040F     406040604060406040604060406
03010301030103010301030103014    F01030103010F          230103010301           103010301035     030103010301030103010301030
705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705
000200020002000Epistemic Machines2000200020002Epistemic Machines00020002000200020002000200Epistemic Machines020002000200020
406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406
0301030103010301030103010301030103010308     301030103011          F03010301030     830103010301030103010301030103010301030
7050705070507050705070507050705070507054     05070507050D          C70507050705     F05070507050705070507050705070507050705
0002000200020002000200020002000200020009     002000200020          F00020002000     500200020002000200020002000200020002000
4060406040604060406040604060F     60406040604060406040604060406040604060406040604060406040F     406040604060406040604060406
030103010Epistemic Machines301030103010301030180103010301030Epistemic Machines103010301030103010301030103010301030103010390
7050705070507050705070507050F     50705070507050705070507050705070507050705070507050705070F     705070507050705070507050705
00020002000200020002000200025     02000200020002000     200200020003     60200020002000200A     000200020002000200020002000
4060406040604060406040604060F     60406040604060406     E06040604060     26040604060406040F     406040604060406040604060406
03010301030103010301030103018     01030103010301030     530103010302     901030103010301039     030103010301030103010301030
7050705070507050705070507050705070507053     0507050705070507050705070507050705     F05070507050705070507050705070507050705
0002000200020002000200020002000200020009     0020002000200020002000200020002000     500200020002000200020002000200020002000
4060406pistemic Machines0406040604060406     0604060406040604060406040604060406     F06040604060406040Epistemic Machines604
0301030103010301030103010301030103010308     301030103Epistemic Machines0103010     830103010301030103010301030103010301030
7050705070507050705070507050705070507054     0507050705070507050705070507050705     F05070507050705070507050705070507050705
0002000200020002000200020002000200020009     0020002000200020002000200020002000     500200020002000200020002000200020002000
406040604060406040604060406054E6C0604060C4E6C0604066C4E5406040604060C4E6C0604062C4E650604096C4E6406040604060406040604060406
03010301030103010301030103018     01030103010301030     530103010302     901030103010301039     030103010301030103010301030
Epistemic Machines05070507050     50705070507050705     F05070507050     55070507050705070F     705070507050705070507050705
00020002000200020002000200025     02000200020002000D3B5D0002000200023B5D300200020002000200A     000200020002000200020002000
4060406040604060406040604060F     604060406040604060pistemic Machines4060406040604060406040     060406040604060406040604060
03010301030103010301030103018     010301030103010301030103010301030103010301030103010301039     030103010301030103010301030
7050705070507050705070507050D    A50705070507050705070507050705070507050705070507050705070E     705070507050705070507050705
0002000200020002000200020002000200020009     002000200020          F00020002000     500200020002000200020002000200020002000
4060406040604060406040604060406040604065     06040604060A          D40604060406     F06040604060406040604060406040604060406
03010pistemic Machines3010301030103010301030103010301030730103pistemic Machines0103011F030103010307301030103010301030103010
705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705
000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000
406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406
03010301030103010301030103017     01030103010           430103010302           103010301038     030103010301030103010301030
7050705070507050705070507050F     50705070507           F05070507050           07050705070F     705070507Epistemic Machines
00020002000200020002000200025     02000200020           200200020003           20002000200A     000200020002000200020002000
406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406
0301030103010301Epistemic Machines03010301030103010301030103010301030103010301030103010301030103010301030103010301030103010
70507050705070507050705070507050705070507050705070507050Epistemic Machines7050705070507050705070507050705070507050705070507
000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000
40604060406040604060406040604060406040604060406040604060406Epistemic Machines04060406040604060406Epistemic Machines04060406
030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030
70507050705070507050705Epistemic Machines0705070507050705070507050705070507050705070507050705070507050705070507050705070507
00020002000200020002000200020002000200020002000200Epistemic Machines0200020002000200020002000200020002000200020002000200020
406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406040604060406
030103010301030103010301Epistemic Machines030103010301030103010301030103010301030103010301030103010301030103010301030103010
7050705070507050705070507050705070507050705070507050705070507050705070507050705070507Epistemic Machines05070507050705070507
00020002000Epistemic Machines20002000200020002000200020002000200020002Epistemic Machines00020002000200020002000200020002000
40604060406040604060406040604060406040604060406040Epistemic Machines6040604060406040604060406040604060406040604060406040604
030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010301030103010Epistemic Machines
705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705070507050705
`;

  useEffect(() => {
    if (!isClient) return; // Only run animation on client side
    
    const interval = setInterval(() => {
      const newVisibleChars = new Set<number>();
      for (let i = 0; i < asciiArtOriginal.length; i++) {
        if (asciiArtOriginal[i] !== '\n' && Math.random() > 0.3) {
          newVisibleChars.add(i);
        }
      }
      setVisibleChars(newVisibleChars);
    }, 150);
    return () => clearInterval(interval);
  }, [isClient, asciiArtOriginal]);

  const renderAnimatedArt = () => {
    return asciiArtOriginal
      .split('')
      .map((char, index) => {
        if (char === '\n') return char;
        return visibleChars.has(index) ? char : ' ';
      })
      .join('');
  };

  return (
    <main className="min-h-screen relative" style={{ backgroundColor: '#0000FF' }}>
      {/* Desktop: Fixed elements in corners */}
      <div className="hidden md:flex fixed top-4 left-4 items-center gap-2 z-10">
        <img src="/prehension.svg" alt="Prehension" className="w-5 h-5" />
        <span className="font-normal text-white" style={{ fontFamily: 'Georgia, serif', fontSize: '18px' }}>Epistemic Machines</span>
        </div> 
      <div className="hidden md:flex fixed bottom-4 left-4 flex-col gap-2 font-mono uppercase z-10">
        <a href="https://medium.com/@epistemicmachines" target="_blank" rel="noopener noreferrer" className="text-xs text-white hover:text-gray-300 transition-colors duration-200 focus:outline-none focus:text-gray-300">RESEARCH↗</a>
        <a href="mailto:hello@epistemicmachines.xyz" className="text-xs text-white hover:text-gray-300 transition-colors duration-200 focus:outline-none focus:text-gray-300">INQUIRIES↗</a>
        <p className="text-xs text-white">© 2025 Epistemic Machines</p>
        </div>
      
      {/* Mobile: Navigation bar */}
      <nav className="md:hidden fixed top-0 left-0 right-0 border-b border-white px-4 py-3 z-10 flex items-center justify-between" style={{ backgroundColor: '#0000FF' }}>
        <img src="/prehension.svg" alt="Prehension" className="w-6 h-6" />
        <div className="flex items-center gap-4 font-mono uppercase text-xs ml-auto">
          <a href="https://medium.com/@epistemicmachines" target="_blank" rel="noopener noreferrer" className="text-xs text-white hover:text-gray-300 transition-colors duration-200 focus:outline-none focus:text-gray-300">RESEARCH↗</a>
          <a href="mailto:hello@epistemicmachines.xyz" className="text-white hover:text-gray-300 transition-colors duration-200 focus:outline-none focus:text-gray-300">INQUIRIES↗</a>
        </div>
      </nav>
      
      {/* Mobile: Footer with copyright */}
      <div className="md:hidden fixed bottom-0 left-0 right-0 border-t border-white px-4 py-2 z-10 text-center" style={{ backgroundColor: '#0000FF' }}>
        <p className="text-xs text-white font-mono uppercase">© 2025 Epistemic Machines</p>
      </div>
      <div 
        className="custom-scrollbar fixed left-0 md:left-auto md:right-0 top-0 bottom-0 w-full md:max-w-[600px] px-6 md:pr-4 pt-[60px] pb-[60px] md:py-[100px] overflow-y-auto overflow-x-visible"
        style={{
          fontFamily: 'Georgia, serif',
          fontSize: '18px',
          lineHeight: '1.4',
          color: '#FFFFFF',
        }}
      >
        <h2 className="text-xs font-normal mb-6 font-mono uppercase">Introducing Epistemic Machines (EM)</h2>
        <p className="mb-6"> Sensemaking complexity at the intersection of data, design, and decision.</p>
        <div className="overflow-x-auto mb-6 -mr-4 scrollbar-hide" style={{ width: 'calc(100% + 16px)' }}>
          <pre className="text-[4px] md:text-[6px] font-mono leading-none whitespace-pre inline-block" style={{ fontFamily: 'monospace', color: '#FFFFFF' }}>
            {renderAnimatedArt()}
          </pre>
        </div>
        <p className="mb-6">EM is developing knowledge tools capable of holistic understanding in continually evolving environments — bypassing noise, identifying patterns, and mapping the trajectories of human ingenuity.</p>
        <p className="mb-6">EM believes that building foundational models that foresee industry novelity is one of the most meaningful problems we can dedicate the next decade to.</p>
        <p className="mb-6">EM aims to help private equity and venture capital firms systematically mitigate uncertainty and enhance their capacity to foster sovereign technologies.</p>
        <p className="mb-6">EM is insatiably skeptical and obsessed with uncovering truth in possibilities.</p>
        <p className="mb-6">EM is (for now) an applied research project led by <a href="https://www.linkedin.com/in/yannick-bruderlein-423b0226a/" target="_blank" rel="noopener noreferrer" className="text-white hover:text-gray-300 transition-colors duration-200 underline">Yannick Bruderlein</a>. </p>
      </div>
    </main>
  );
}